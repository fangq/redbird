<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   viewBox="0 0 1400 1000"
   version="1.1"
   id="svg263"
   sodipodi:docname="redbird_function_diagram.svg"
   inkscape:version="1.1.2 (0a00cf5339, 2022-02-04)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview265"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     showgrid="false"
     inkscape:zoom="1.6744289"
     inkscape:cx="553.323"
     inkscape:cy="399.53922"
     inkscape:window-width="2560"
     inkscape:window-height="1352"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="g167" />
  <defs
     id="defs5">
    <marker
       id="arrowhead"
       markerWidth="10"
       markerHeight="7"
       refX="9"
       refY="3.5"
       orient="auto">
      <polygon
         points="0 0, 10 3.5, 0 7"
         fill="#333"
         id="polygon2" />
    </marker>
  </defs>
  <!-- Background -->
  <rect
     width="1400"
     height="1000"
     fill="#f8f9fa"
     id="rect7" />
  <!-- Title -->
  <text
     x="700"
     y="35"
     text-anchor="middle"
     font-family="Arial, sans-serif"
     font-size="32"
     font-weight="bold"
     fill="#2c3e50"
     id="text9">Redbird Toolbox Function Organization</text>
  <!-- Main Driver Functions (Top Level) -->
  <g
     id="g27">
    <rect
       x="50"
       y="70"
       width="1300"
       height="80"
       rx="10"
       fill="#ffccbc"
       stroke="#ff6b35"
       stroke-width="2"
       id="rect11" />
    <text
       x="700"
       y="95"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="22"
       font-weight="bold"
       fill="#d84315"
       id="text13">Driver Functions (rbrun*)</text>
    <!-- Driver function boxes -->
    <rect
       x="200"
       y="110"
       width="150"
       height="35"
       rx="5"
       fill="#ff6b35"
       id="rect15" />
    <text
       x="275"
       y="132"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="14"
       fill="white"
       font-weight="bold"
       id="text17">rbrun()</text>
    <rect
       x="380"
       y="110"
       width="180"
       height="35"
       rx="5"
       fill="#ff6b35"
       id="rect19" />
    <text
       x="470"
       y="132"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="14"
       fill="white"
       font-weight="bold"
       id="text21">rbrunforward(cfg)</text>
    <rect
       x="590"
       y="110"
       width="180"
       height="35"
       rx="5"
       fill="#ff6b35"
       id="rect23" />
    <text
       x="680"
       y="132"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="14"
       fill="white"
       font-weight="bold"
       id="text25">rbrunrecon()</text>
  </g>
  <!-- Forward Solvers Section -->
  <g
     id="g77">
    <rect
       x="50"
       y="180"
       width="650"
       height="350"
       rx="10"
       fill="#e3f2fd"
       stroke="#3498db"
       stroke-width="2"
       id="rect29" />
    <text
       x="375"
       y="205"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="20"
       font-weight="bold"
       fill="#1976d2"
       id="text31">Forward Solvers</text>
    <!-- FEM System Equation Group -->
    <rect
       x="70"
       y="220"
       width="280"
       height="180"
       rx="5"
       fill="#bbdefb"
       stroke="#2196f3"
       stroke-width="1"
       stroke-dasharray="5,5"
       id="rect33" />
    <text
       x="210"
       y="240"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="15"
       font-weight="bold"
       fill="#0d47a1"
       id="text35">FEM System (rbfem*)</text>
    <rect
       x="80"
       y="250"
       width="100"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect37" />
    <text
       x="130"
       y="269"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text39">rbfemlhs</text>
    <rect
       x="190"
       y="250"
       width="100"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect41" />
    <text
       x="240"
       y="269"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text43">rbfemrhs</text>
    <rect
       x="80"
       y="285"
       width="100"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect45" />
    <text
       x="130"
       y="304"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text47">rbfemsolve</text>
    <rect
       x="190"
       y="285"
       width="100"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect49" />
    <text
       x="240"
       y="304"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text51">rbfemgetdet</text>
    <rect
       x="80"
       y="320"
       width="100"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect53" />
    <text
       x="130"
       y="339"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text55">rbdeldotdel</text>
    <rect
       x="190"
       y="320"
       width="100"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect57" />
    <text
       x="240"
       y="339"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text59">rbsrc2bc</text>
    <rect
       x="135"
       y="355"
       width="120"
       height="30"
       rx="3"
       fill="#1976d2"
       id="rect61" />
    <text
       x="195"
       y="374"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text63">rbfemmatrix (mex)</text>
    <!-- Pre/Post Processing Group -->
    <rect
       x="370"
       y="220"
       width="300"
       height="140"
       rx="5"
       fill="#bbdefb"
       stroke="#2196f3"
       stroke-width="1"
       stroke-dasharray="5,5"
       id="rect65" />
    <text
       x="520"
       y="240"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="15"
       font-weight="bold"
       fill="#0d47a1"
       id="text67">Pre/Post Processing</text>
    <rect
       x="390"
       y="250"
       width="120"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect69" />
    <text
       x="450"
       y="269"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text71">rbmeshprep</text>
    <rect
       x="530"
       y="250"
       width="120"
       height="30"
       rx="3"
       fill="#3498db"
       id="rect73" />
    <text
       x="590"
       y="269"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text75">rbaddnoise</text>
  </g>
  <!-- Inverse Solvers Section -->
  <g
     id="g167">
    <rect
       x="720"
       y="180"
       width="630"
       height="350"
       rx="10"
       fill="#ffebee"
       stroke="#e74c3c"
       stroke-width="2"
       id="rect79" />
    <text
       x="1035"
       y="205"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="20"
       font-weight="bold"
       fill="#c62828"
       id="text81">Inverse Solvers</text>
    <!-- Jacobian Building Group -->
    <rect
       x="740"
       y="220"
       width="280"
       height="180"
       rx="5"
       fill="#ffcdd2"
       stroke="#f44336"
       stroke-width="1"
       stroke-dasharray="5,5"
       id="rect83" />
    <text
       x="880"
       y="240"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="15"
       font-weight="bold"
       fill="#b71c1c"
       id="text85">Jacobians (rbjac*)</text>
    <rect
       x="750"
       y="250"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect87" />
    <text
       x="790"
       y="267"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text89">rbjac</text>
    <rect
       x="840"
       y="250"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect91" />
    <text
       x="880"
       y="267"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text93">rbjacmex</text>
    <rect
       x="930"
       y="250"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect95" />
    <text
       x="970"
       y="267"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text97">rbjacmuafast</text>
    <rect
       x="750"
       y="285"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect99" />
    <text
       x="790"
       y="302"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text101">rbjacmus</text>
    <rect
       x="840"
       y="285"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect103" />
    <text
       x="880"
       y="302"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text105">rbjacchrome</text>
    <rect
       x="930"
       y="285"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect107" />
    <text
       x="970"
       y="302"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text109">rbjacscat</text>
    <rect
       x="750"
       y="320"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect111" />
    <text
       x="790"
       y="337"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text113">rbjacscatamp</text>
    <rect
       x="840"
       y="320"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect115" />
    <text
       x="880"
       y="337"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text117">rbjacscatpow</text>
    <rect
       x="930"
       y="320"
       width="80"
       height="27"
       rx="3"
       fill="#e74c3c"
       id="rect119" />
    <text
       x="970"
       y="337"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text121">rbjacnode</text>
    <rect
       x="795"
       y="355"
       width="130"
       height="27"
       rx="3"
       fill="#c62828"
       id="rect123" />
    <text
       x="860"
       y="372"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text125">rbmultispectral</text>
    <!-- Regularization Group -->
    <rect
       x="1040"
       y="220"
       width="290"
       height="180"
       rx="5"
       fill="#ffcdd2"
       stroke="#f44336"
       stroke-width="1"
       stroke-dasharray="5,5"
       id="rect127" />
    <text
       x="1185"
       y="240"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="15"
       font-weight="bold"
       fill="#b71c1c"
       id="text129">Regularization (rbreginv*)</text>
    <rect
       x="1050"
       y="250"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect131"
       style="stroke-width:0.970038" />
    <text
       x="1095"
       y="267"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text133">rbreginv</text>
    <rect
       x="1144.0973"
       y="250"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect135"
       style="stroke-width:0.970038" />
    <text
       x="1185"
       y="267"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10px"
       fill="#ffffff"
       id="text137">rbreginvover</text>
    <rect
       x="1238.1946"
       y="250"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect139"
       style="stroke-width:0.970038" />
    <text
       x="1281"
       y="267"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="9px"
       fill="#ffffff"
       id="text141">rbreginvunder</text>
    <rect
       x="1050"
       y="285"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect143"
       style="stroke-width:0.970038" />
    <text
       x="1095"
       y="302"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text145">rbprior</text>
    <rect
       x="1144.0973"
       y="285"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect147"
       style="stroke-width:0.970038" />
    <text
       x="1185"
       y="302"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="9px"
       fill="#ffffff"
       id="text149">rbregemperical</text>
    <rect
       x="1238.1946"
       y="285"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect151"
       style="stroke-width:0.970038" />
    <text
       x="1281"
       y="302"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10px"
       fill="#ffffff"
       id="text153">rbcreateinv</text>
    <rect
       x="1050"
       y="320"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect155"
       style="stroke-width:0.970038" />
    <text
       x="1095"
       y="337"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10"
       fill="white"
       id="text157">rbmatreform</text>
    <rect
       x="1144.0973"
       y="320"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect159"
       style="stroke-width:0.970038" />
    <text
       x="1185"
       y="337"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="10px"
       fill="#ffffff"
       id="text161">rbmatflat</text>
    <rect
       x="1238.1946"
       y="320"
       width="84.687569"
       height="27"
       rx="2.8229189"
       fill="#e74c3c"
       id="rect163"
       style="stroke-width:0.970038" />
    <text
       x="1281"
       y="337"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="9px"
       fill="#ffffff"
       id="text165">rbnormalizediag</text>
  </g>
  <!-- Optical Property Management -->
  <g
     id="g197">
    <rect
       x="50"
       y="560"
       width="650"
       height="160"
       rx="10"
       fill="#fff8e1"
       stroke="#f39c12"
       stroke-width="2"
       id="rect169" />
    <text
       x="375"
       y="585"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="20"
       font-weight="bold"
       fill="#e65100"
       id="text171">Optical Property Management</text>
    <rect
       x="70"
       y="600"
       width="110"
       height="30"
       rx="3"
       fill="#f39c12"
       id="rect173" />
    <text
       x="125"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text175">rbextinction</text>
    <rect
       x="190"
       y="600"
       width="110"
       height="30"
       rx="3"
       fill="#f39c12"
       id="rect177" />
    <text
       x="245"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text179">rbgetreff</text>
    <rect
       x="310"
       y="600"
       width="110"
       height="30"
       rx="3"
       fill="#f39c12"
       id="rect181" />
    <text
       x="365"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text183">rbupdateprop</text>
    <rect
       x="430"
       y="600"
       width="110"
       height="30"
       rx="3"
       fill="#f39c12"
       id="rect185" />
    <text
       x="485"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text187">rbsyncprop</text>
    <rect
       x="550"
       y="600"
       width="110"
       height="30"
       rx="3"
       fill="#f39c12"
       id="rect189" />
    <text
       x="605"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text191">rbgetbulk</text>
    <rect
       x="250"
       y="640"
       width="130"
       height="30"
       rx="3"
       fill="#e67e22"
       id="rect193" />
    <text
       x="315"
       y="659"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text195">rbmusp2sasp</text>
  </g>
  <!-- Optode Management -->
  <g
     id="g215">
    <rect
       x="720"
       y="560"
       width="630"
       height="160"
       rx="10"
       fill="#f3e5f5"
       stroke="#9b59b6"
       stroke-width="2"
       id="rect199" />
    <text
       x="1035"
       y="585"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="20"
       font-weight="bold"
       fill="#6a1b9a"
       id="text201">Optode Management</text>
    <rect
       x="800"
       y="600"
       width="120"
       height="30"
       rx="3"
       fill="#9b59b6"
       id="rect203" />
    <text
       x="860"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text205">rbsdmap</text>
    <rect
       x="940"
       y="600"
       width="120"
       height="30"
       rx="3"
       fill="#9b59b6"
       id="rect207" />
    <text
       x="1000"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="11"
       fill="white"
       id="text209">rbgetdistance</text>
    <rect
       x="1080"
       y="600"
       width="120"
       height="30"
       rx="3"
       fill="#9b59b6"
       id="rect211" />
    <text
       x="1140"
       y="619"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="white"
       id="text213">rbgetltr</text>
  </g>
  <!-- Utility Functions -->
  <g
     id="g227">
    <rect
       x="50"
       y="750"
       width="1300"
       height="120"
       rx="10"
       fill="#e8f5e8"
       stroke="#2ecc71"
       stroke-width="2"
       id="rect217" />
    <text
       x="700"
       y="775"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="20"
       font-weight="bold"
       fill="#1b5e20"
       id="text219">Utility Functions (rbget*)</text>
    <text
       x="700"
       y="800"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="15"
       fill="#2e7d32"
       id="text221">Extraction and conversion between different data structures</text>
    <rect
       x="600"
       y="810"
       width="200"
       height="35"
       rx="5"
       fill="#2ecc71"
       id="rect223" />
    <text
       x="700"
       y="832"
       text-anchor="middle"
       font-family="Arial, sans-serif"
       font-size="14"
       fill="white"
       font-weight="bold"
       id="text225">rbget* functions</text>
  </g>
  <!-- Arrows showing relationships -->
  <!-- Driver to Forward -->
  <line
     x1="470"
     y1="140"
     x2="470"
     y2="175"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line229" />
  <!-- Driver to Inverse -->
  <line
     x1="680"
     y1="140"
     x2="880"
     y2="175"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line231" />
  <!-- Forward to Optical Properties -->
  <line
     x1="375"
     y1="530"
     x2="375"
     y2="555"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line233" />
  <!-- Forward to Optodes -->
  <line
     x1="600"
     y1="350"
     x2="860"
     y2="555"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line235" />
  <!-- Inverse to Optical Properties -->
  <line
     x1="900"
     y1="530"
     x2="485"
     y2="555"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line237" />
  <!-- Inverse to Optodes -->
  <line
     x1="1035"
     y1="530"
     x2="1035"
     y2="555"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line239" />
  <!-- All to Utilities -->
  <line
     x1="375"
     y1="720"
     x2="600"
     y2="745"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line241" />
  <line
     x1="1035"
     y1="720"
     x2="800"
     y2="745"
     stroke="#333"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="line243" />
  <!-- Legend -->
  <g
     id="g261">
    <rect
       x="50"
       y="900"
       width="300"
       height="80"
       rx="5"
       fill="#f8f9fa"
       stroke="#ddd"
       stroke-width="1"
       id="rect245" />
    <text
       x="60"
       y="920"
       font-family="Arial, sans-serif"
       font-size="14"
       font-weight="bold"
       fill="#333"
       id="text247">Legend:</text>
    <line
       x1="60"
       y1="930"
       x2="90"
       y2="930"
       stroke="#333"
       stroke-width="2"
       marker-end="url(#arrowhead)"
       id="line249" />
    <text
       x="100"
       y="935"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="#333"
       id="text251">Data flow / Dependencies</text>
    <rect
       x="60"
       y="945"
       width="15"
       height="10"
       rx="2"
       fill="#ff6b35"
       id="rect253" />
    <text
       x="85"
       y="954"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="#333"
       id="text255">Driver functions</text>
    <rect
       x="60"
       y="960"
       width="15"
       height="10"
       rx="2"
       fill="#3498db"
       id="rect257" />
    <text
       x="85"
       y="969"
       font-family="Arial, sans-serif"
       font-size="12"
       fill="#333"
       id="text259">Forward/FEM functions</text>
  </g>
</svg>
